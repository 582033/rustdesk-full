import{l as E}from"./global-Czwz-x68.js";import{_ as I,T as n}from"../entry/index-Czm67r7X.js";import{u as L}from"./index-DpjiwSEx.js";import{l as Q,aa as R,w as C,an as o,at as j,c as f,o as p,e as t,Y as a,u as e,P as q,ah as M,b as w,a0 as d,a1 as c,Z as Y,_ as Z}from"./_@vue-DEM3y_BF.js";import"./_element-plus-T6dmKOyC.js";import"./__vendor-BGruaAdM.js";import"./_@element-plus-CvluYIrs.js";import"./_@popperjs-DB1lLFnh.js";import"./_axios-BtuGy7By.js";const G={key:0},H={__name:"index",setup(J){const{allUsers:b,getAllUsers:z}=E();z();const{listRes:_,listQuery:r,getList:u,handlerQuery:h,del:U,multipleSelection:D,toBatchDelete:S,expired:V}=L("admin");Q(u),R(u),C(()=>r.page,u),C(()=>r.page_size,h);const A=v=>{D.value=v};return(v,i)=>{const B=o("el-option"),F=o("el-select"),y=o("el-form-item"),m=o("el-button"),N=o("el-form"),g=o("el-card"),s=o("el-table-column"),x=o("el-tag"),P=o("el-table"),T=o("el-pagination"),$=j("loading");return p(),f("div",null,[t(g,{class:"list-query",shadow:"hover"},{default:a(()=>[t(N,{inline:"","label-width":"80px"},{default:a(()=>[t(y,{label:e(n)("User")},{default:a(()=>[t(F,{modelValue:e(r).user_id,"onUpdate:modelValue":i[0]||(i[0]=l=>e(r).user_id=l),clearable:""},{default:a(()=>[(p(!0),f(q,null,M(e(b),l=>(p(),w(B,{key:l.id,label:l.username,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(y,null,{default:a(()=>[t(m,{type:"primary",onClick:e(h)},{default:a(()=>[d(c(e(n)("Filter")),1)]),_:1},8,["onClick"]),t(m,{type:"danger",onClick:e(S)},{default:a(()=>[d(c(e(n)("BatchDelete")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),t(g,{class:"list-body",shadow:"hover"},{default:a(()=>[Y((p(),w(P,{data:e(_).list,border:"",onSelectionChange:A},{default:a(()=>[t(s,{type:"selection",align:"center",width:"50"}),t(s,{prop:"id",label:"ID",align:"center",width:"100"}),t(s,{label:e(n)("User"),align:"center",width:"120"},{default:a(({row:l})=>[l.user_id?(p(),f("span",G,[t(x,null,{default:a(()=>[d(c(e(b)?.find(k=>k.id===l.user_id)?.username),1)]),_:2},1024)])):Z("",!0)]),_:1},8,["label"]),t(s,{prop:"peer_id",label:e(n)("Peer"),align:"center"},null,8,["label"]),t(s,{prop:"created_at",label:e(n)("CreatedAt"),align:"center"},null,8,["label"]),t(s,{label:`${e(n)("ExpireTime")} (${e(n)("Second")})`,prop:"expire",align:"center"},{default:a(({row:l})=>[t(x,{type:e(V)(l)?"info":"success"},{default:a(()=>[d(c(l.expire?l.expire:e(n)("Forever")),1)]),_:2},1032,["type"])]),_:1},8,["label"]),t(s,{label:e(n)("Actions"),align:"center",width:"400"},{default:a(({row:l})=>[t(m,{type:"danger",onClick:k=>e(U)(l)},{default:a(()=>[d(c(e(n)("Delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[$,e(_).loading]])]),_:1}),t(g,{class:"list-page",shadow:"hover"},{default:a(()=>[t(T,{background:"",layout:"prev, pager, next, sizes, jumper","page-sizes":[10,20,50,100],"page-size":e(r).page_size,"onUpdate:pageSize":i[1]||(i[1]=l=>e(r).page_size=l),"current-page":e(r).page,"onUpdate:currentPage":i[2]||(i[2]=l=>e(r).page=l),total:e(_).total},null,8,["page-size","current-page","total"])]),_:1})])}}},oe=I(H,[["__scopeId","data-v-04a72a47"]]);export{oe as default};
