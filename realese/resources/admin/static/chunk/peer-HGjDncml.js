import{ae as k,af as $}from"./__vendor-BGruaAdM.js";import{d as A,s as o,T as r}from"../entry/index-Czm67r7X.js";import{u as F}from"./collection-CALyNR1w.js";import{u as P}from"./index-B1Bs_yz0.js";import{s as B}from"./peer-DzPg3Mq6.js";import{b as u,c as D}from"./_element-plus-T6dmKOyC.js";import{x as C,r as U}from"./_@vue-DEM3y_BF.js";(()=>{if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw"Unable to locate global object"})();k.util.Long!==$&&(k.util.Long=$,k.configure());(()=>{if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw"Unable to locate global object"})();const R=A(),ne=e=>{console.log(R.setting.rustdeskConfig),window.open(`${R.setting.rustdeskConfig.api_server}/webclient2/#/${e.id}`)};function le(e){return`${R.setting.rustdeskConfig.api_server}/webclient2/#/?share_token=${e}`}function E(e){return o({url:"/address_book/list",params:e})}function W(e){return o({url:"/address_book/create",method:"post",data:e})}function z(e){return o({url:"/address_book/update",method:"post",data:e})}function M(e){return o({url:"/address_book/delete",method:"post",data:e})}function ce(e){return o({url:"/address_book/batchCreate",method:"post",data:e})}function de(e){return o({url:"/address_book/shareByWebClient",method:"post",data:e})}function ue(e){return o({url:"/address_book/batchCreateFromPeers",method:"post",data:e})}function j(e){return o({url:"/my/address_book/list",params:e})}function fe(e){return o({url:"/my/address_book/batchCreateFromPeers",method:"post",data:e})}function N(e){return o({url:"/my/address_book/batchUpdateTags",method:"post",data:e})}function V(e){return o({url:"/my/address_book/create",method:"post",data:e})}function q(e){return o({url:"/my/address_book/update",method:"post",data:e})}function G(e){return o({url:"/my/address_book/delete",method:"post",data:e})}const w={admin:{list:E,remove:M,update:z,create:W},my:{list:j,remove:G,create:V,update:q}};function me(e="my"){const{listRes:n,listQuery:f,getList:c}=F(e);f.page_size=9999;const l=C({list:[],total:0,loading:!1}),i=C({page:1,page_size:10,id:null,user_id:null,username:null,hostname:null,collection_id:null}),m=async()=>{l.loading=!0;const s=await w[e].list(i).catch(a=>!1);if(l.loading=!1,s){const a=s.data.list.map(d=>d.id);if(a.length){const d=await B({ids:a}).catch(h=>!1);d&&s.data.list.forEach(h=>{const T=d.data.list.find(O=>O.id===h.id);T&&(h.peer=T)})}l.list=s.data.list,l.total=s.data.total}},x=()=>{i.page===1?m():i.page=1},S=async s=>{if(!await D.confirm(r("Confirm?",{param:r("Delete")}),{confirmButtonText:r("Confirm"),cancelButtonText:r("Cancel"),type:"warning"}).catch(h=>!1))return!1;await w[e].remove({row_id:s.row_id}).catch(h=>!1)&&(u.success(r("OperationSuccess")),m())},g=[{label:"Windows",value:"Windows",icon:"windows"},{label:"Linux",value:"Linux",icon:"linux"},{label:"Mac OS",value:"Mac OS",icon:"mac"},{label:"Android",value:"Android",icon:"android"}],b=U(!1),t=C({row_id:0,alias:"",forceAlwaysRelay:!1,hash:"",hostname:"",id:"",loginName:"",online:!1,password:"",platform:"",rdpPort:"",rdpUsername:"",sameServer:!1,tags:[],user_id:null,user_ids:[],username:"",collection_id:null}),{listRes:Q,listQuery:y,getList:v}=F(e);y.page_size=9999;const{listRes:_,listQuery:p,getList:L}=P(e);return p.page_size=9999,{listRes:l,listQuery:i,getList:m,handlerQuery:x,collectionListQuery:f,getCollectionList:c,collectionListRes:n,changeQueryUser:async s=>{_.list=[],i.collection_id=null,s?(f.user_id=s,c()):n.list=[]},platformList:g,del:S,formVisible:b,formData:t,toEdit:s=>{b.value=!0,Object.keys(t).forEach(a=>{t[a]=s[a]}),y.user_id=s.user_id,p.collection_id=s.collection_id,v(),L()},toAdd:()=>{b.value=!0,t.row_id=0,t.alias="",t.forceAlwaysRelay=!1,t.hash="",t.hostname="",t.id="",t.loginName="",t.online=!1,t.password="",t.platform="",t.rdpPort="",t.rdpUsername="",t.sameServer=!1,t.tags=[],t.user_id=null,t.username=""},submit:async()=>{await(t.row_id?w[e].update:w[e].create)(t).catch(d=>!1)&&(u.success(r("OperationSuccess")),b.value=!1,m())},getCollectionListForUpdate:v,collectionListResForUpdate:Q,changeUserForUpdate:async s=>{_.list=[],t.tags=[],t.collection_id=0,s?(y.user_id=s,v()):Q.list=[]},changeCollectionForUpdate:async s=>{_.list=[],t.tags=[],p.user_id=t.user_id,p.collection_id=s,L()},tagListQuery:p,getTagList:L,tagListRes:_,fromPeer:s=>{t.id=s.id,t.username=s.username,t.hostname=s.hostname,s.os.indexOf("windows")!==-1?t.platform=g.find(a=>a.label==="Windows").value:s.os.indexOf("linux")!==-1?t.platform=g.find(a=>a.label==="Linux").value:s.os.indexOf("android")!==-1?t.platform=g.find(a=>a.label==="Android").value:s.os.indexOf("mac")!==-1&&(t.platform=g.find(a=>a.label==="Mac OS").value),t.uuid=s.uuid}}}function ge(){const{listRes:e,listQuery:n,getList:f}=P("my");n.page_size=9999;const c=U(!1),l=()=>{if(i.value.row_ids.length===0){u.warning(r("PleaseSelectData"));return}c.value=!0},i=U({tags:[],row_ids:[]});return{tagListQuery:n,getTagList:f,tagListRes:e,visible:c,formData:i,show:l,submit:async()=>i.value.row_ids.length===0?(u.warning(r("PleaseSelectData")),!1):i.value.tags.length===0?(u.warning(r("PleaseSelectData")),!1):await N(i.value).catch(S=>!1)?(u.success(r("Success")),c.value=!1,!0):!1}}const pe=e=>{let n=document.createElement("a");n.href=`rustdesk://${e}`,n.target="_self",n.click()};export{ge as a,fe as b,pe as c,ce as d,ue as e,le as g,de as s,ne as t,me as u};
