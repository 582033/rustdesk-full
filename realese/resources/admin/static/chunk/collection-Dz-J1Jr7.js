import{T as a}from"../entry/index-Czm67r7X.js";import{u as P}from"./collection-CALyNR1w.js";import{_ as Q}from"./rule-FMj29F2s.js";import{l as j,w as z,m as L,r as A,an as i,at as Y,c as R,o as y,e as l,Y as t,u as e,a0 as s,a1 as r,Z,b as G,_ as H,P as I,A as J}from"./_@vue-DEM3y_BF.js";import"./_element-plus-T6dmKOyC.js";import"./__vendor-BGruaAdM.js";import"./_@element-plus-CvluYIrs.js";import"./_@popperjs-DB1lLFnh.js";import"./_axios-BtuGy7By.js";const ie={__name:"collection",setup(K){const{listRes:p,listQuery:d,getList:k,handlerQuery:C,del:U,formVisible:m,formData:c,toEdit:B,toAdd:D,submit:N}=P("my");j(k),z(()=>d.page,k),z(()=>d.page_size,C);const S=L(f=>d.page>1?p.list:[{id:0,name:a("MyAddressBook")},...p.list]),V=A({}),_=A(!1),$=f=>{V.value=f,_.value=!0};return(f,n)=>{const u=i("el-button"),g=i("el-form-item"),w=i("el-form"),b=i("el-card"),E=i("el-tag"),v=i("el-table-column"),M=i("el-table"),T=i("el-pagination"),q=i("el-input"),h=i("el-dialog"),F=Y("loading");return y(),R("div",null,[l(b,{class:"list-query",shadow:"hover"},{default:t(()=>[l(w,{inline:"","label-width":"80px"},{default:t(()=>[l(g,null,{default:t(()=>[l(u,{type:"primary",onClick:e(C)},{default:t(()=>[s(r(e(a)("Filter")),1)]),_:1},8,["onClick"]),l(u,{type:"danger",onClick:e(D)},{default:t(()=>[s(r(e(a)("Add")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),l(b,{class:"list-body",shadow:"hover"},{default:t(()=>[l(E,{type:"danger",effect:"light",style:{"margin-bottom":"10px"}},{default:t(()=>[s(r(e(a)("MyAddressBookTips")),1)]),_:1}),Z((y(),G(M,{data:S.value,border:""},{default:t(()=>[l(v,{prop:"name",label:e(a)("Name"),align:"center"},null,8,["label"]),l(v,{prop:"created_at",label:e(a)("CreatedAt"),align:"center"},null,8,["label"]),l(v,{label:e(a)("Actions"),align:"center","class-name":"table-actions",width:"600",fixed:"right"},{default:t(({row:o})=>[o.id>0?(y(),R(I,{key:0},[l(u,{type:"primary",onClick:x=>$(o)},{default:t(()=>[s(r(e(a)("ShareRules")),1)]),_:2},1032,["onClick"]),l(u,{onClick:x=>e(B)(o)},{default:t(()=>[s(r(e(a)("Edit")),1)]),_:2},1032,["onClick"]),l(u,{type:"danger",onClick:x=>e(U)(o)},{default:t(()=>[s(r(e(a)("Delete")),1)]),_:2},1032,["onClick"])],64)):H("",!0)]),_:1},8,["label"])]),_:1},8,["data"])),[[F,e(p).loading]])]),_:1}),l(b,{class:"list-page",shadow:"hover"},{default:t(()=>[l(T,{background:"",layout:"prev, pager, next, sizes, jumper","page-sizes":[10,20,50,100],"page-size":e(d).page_size,"onUpdate:pageSize":n[0]||(n[0]=o=>e(d).page_size=o),"current-page":e(d).page,"onUpdate:currentPage":n[1]||(n[1]=o=>e(d).page=o),total:e(p).total},null,8,["page-size","current-page","total"])]),_:1}),l(h,{modelValue:e(m),"onUpdate:modelValue":n[4]||(n[4]=o=>J(m)?m.value=o:null),width:"800",title:e(c).id?e(a)("Update"):e(a)("Create")},{default:t(()=>[l(w,{class:"dialog-form",ref:"form",model:e(c),"label-width":"120px"},{default:t(()=>[l(g,{label:e(a)("Name"),prop:"name",required:""},{default:t(()=>[l(q,{modelValue:e(c).name,"onUpdate:modelValue":n[2]||(n[2]=o=>e(c).name=o)},null,8,["modelValue"])]),_:1},8,["label"]),l(g,null,{default:t(()=>[l(u,{onClick:n[3]||(n[3]=o=>m.value=!1)},{default:t(()=>[s(r(e(a)("Cancel")),1)]),_:1}),l(u,{onClick:e(N),type:"primary"},{default:t(()=>[s(r(e(a)("Submit")),1)]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),l(h,{modelValue:_.value,"onUpdate:modelValue":n[5]||(n[5]=o=>_.value=o),title:e(a)("ShareRules"),"destroy-on-close":"",top:"5vh",width:"80%"},{default:t(()=>[l(Q,{collection:V.value,is_my:1},null,8,["collection"])]),_:1},8,["modelValue","title"])])}}};export{ie as default};
