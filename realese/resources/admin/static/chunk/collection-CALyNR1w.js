import{s as o,T as a}from"../entry/index-Czm67r7X.js";import{b as f,c as h}from"./_element-plus-T6dmKOyC.js";import{x as d,r as g}from"./_@vue-DEM3y_BF.js";function v(e){return o({url:"/address_book_collection/list",params:e})}function y(e){return o({url:"/address_book_collection/create",method:"post",data:e})}function k(e){return o({url:"/address_book_collection/update",method:"post",data:e})}function E(e){return o({url:"/address_book_collection/delete",method:"post",data:e})}function w(e){return o({url:"/my/address_book_collection/list",params:e})}function x(e){return o({url:"/my/address_book_collection/create",method:"post",data:e})}function O(e){return o({url:"/my/address_book_collection/update",method:"post",data:e})}function $(e){return o({url:"/my/address_book_collection/delete",method:"post",data:e})}const u={admin:{list:v,remove:E,update:k,create:y},my:{list:w,remove:$,create:x,update:O}};function M(e="my"){const r=d({list:[],total:0,loading:!1}),n=d({page:1,page_size:10,name:null,user_id:null}),i=async()=>{r.loading=!0;const t=await u[e].list(n).catch(c=>!1);r.loading=!1,t&&(r.list=t.data.list,r.total=t.data.total)},m=()=>{n.page===1?i():n.page=1},p=async t=>{if(!await h.confirm(a("Confirm?",{param:a("Delete")}),{confirmButtonText:a("Confirm"),cancelButtonText:a("Cancel"),type:"warning"}).catch(b=>!1))return!1;await u[e].remove({id:t.id}).catch(b=>!1)&&(f.success(a("OperationSuccess")),i())},l=g(!1),s=d({id:0,name:""});return{listRes:r,listQuery:n,getList:i,handlerQuery:m,del:p,formVisible:l,formData:s,toEdit:t=>{l.value=!0,Object.keys(s).forEach(c=>{s[c]=t[c]})},toAdd:()=>{l.value=!0,Object.keys(s).forEach(t=>{s[t]=void 0})},submit:async()=>{await(s.id?u[e].update:u[e].create)(s).catch(_=>!1)&&(f.success(a("OperationSuccess")),l.value=!1,i())}}}export{M as u};
