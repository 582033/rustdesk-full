import{u as X,c as ee,t as le}from"./peer-HGjDncml.js";import{_ as ae,d as oe,T as n}from"../entry/index-Czm67r7X.js";import{aa as te}from"./__vendor-BGruaAdM.js";import{h as ne}from"./clipboard-CMGTTqw4.js";import{P as de}from"./platform-BWoAImIS.js";import{l as ue}from"./global-Czwz-x68.js";import{T as se}from"./_@element-plus-CvluYIrs.js";import{l as N,aa as ie,w as R,an as r,at as re,c as b,o as u,e as a,Y as o,u as e,P as C,ah as y,b as k,a0 as _,a1 as p,Z as pe,a as me,_ as I,A as be}from"./_@vue-DEM3y_BF.js";import"./collection-CALyNR1w.js";import"./_element-plus-T6dmKOyC.js";import"./_@popperjs-DB1lLFnh.js";import"./index-B1Bs_yz0.js";import"./peer-DzPg3Mq6.js";import"./_axios-BtuGy7By.js";const _e={key:0},fe={key:0},ce={key:1},ge={__name:"index",setup(Ve){const q=oe(),B=te(),{allUsers:h,getAllUsers:F}=ue(),{listRes:w,listQuery:s,getList:A,handlerQuery:z,collectionListRes:H,del:P,formVisible:U,platformList:L,formData:d,toEdit:S,toAdd:T,submit:$,changeUserForUpdate:M,changeCollectionForUpdate:E,collectionListResForUpdate:O,tagListRes:Q,changeQueryUser:W}=X("admin");return B.query?.user_id&&(s.user_id=parseInt(B.query.user_id)),N(F),N(A),ie(A),R(()=>s.page,A),R(()=>s.page_size,z),(ke,t)=>{const c=r("el-option"),v=r("el-select"),i=r("el-form-item"),g=r("el-input"),V=r("el-button"),D=r("el-form"),x=r("el-card"),j=r("el-icon"),m=r("el-table-column"),Y=r("el-tag"),Z=r("el-table"),G=r("el-pagination"),J=r("el-dialog"),K=re("loading");return u(),b("div",null,[a(x,{class:"list-query",shadow:"hover"},{default:o(()=>[a(D,{inline:"","label-width":"120px"},{default:o(()=>[a(i,{label:e(n)("Owner")},{default:o(()=>[a(v,{modelValue:e(s).user_id,"onUpdate:modelValue":t[0]||(t[0]=l=>e(s).user_id=l),clearable:"",onChange:e(W)},{default:o(()=>[(u(!0),b(C,null,y(e(h),l=>(u(),k(c,{key:l.id,label:l.username,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),_:1},8,["label"]),a(i,{label:e(n)("AddressBookName")},{default:o(()=>[a(v,{modelValue:e(s).collection_id,"onUpdate:modelValue":t[1]||(t[1]=l=>e(s).collection_id=l),clearable:""},{default:o(()=>[a(c,{value:0,label:e(n)("MyAddressBook")},null,8,["label"]),(u(!0),b(C,null,y(e(H).list,l=>(u(),k(c,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),a(i,{label:e(n)("Id")},{default:o(()=>[a(g,{modelValue:e(s).id,"onUpdate:modelValue":t[2]||(t[2]=l=>e(s).id=l),clearable:""},null,8,["modelValue"])]),_:1},8,["label"]),a(i,{label:e(n)("Username")},{default:o(()=>[a(g,{modelValue:e(s).username,"onUpdate:modelValue":t[3]||(t[3]=l=>e(s).username=l),clearable:""},null,8,["modelValue"])]),_:1},8,["label"]),a(i,{label:e(n)("Hostname")},{default:o(()=>[a(g,{modelValue:e(s).hostname,"onUpdate:modelValue":t[4]||(t[4]=l=>e(s).hostname=l),clearable:""},null,8,["modelValue"])]),_:1},8,["label"]),a(i,null,{default:o(()=>[a(V,{type:"primary",onClick:e(z)},{default:o(()=>[_(p(e(n)("Filter")),1)]),_:1},8,["onClick"]),a(V,{type:"danger",onClick:e(T)},{default:o(()=>[_(p(e(n)("Add")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),a(x,{class:"list-body",shadow:"hover"},{default:o(()=>[pe((u(),k(Z,{data:e(w).list,border:""},{default:o(()=>[a(m,{prop:"id",label:"ID",align:"center",width:"200"},{default:o(({row:l})=>[me("div",null,[a(de,{name:e(L).find(f=>f.label===l.platform)?.icon,style:{width:"20px",height:"20px",display:"inline-block"},color:"var(--basicBlack)"},null,8,["name"]),_(" "+p(l.id)+" ",1),a(j,{onClick:f=>e(ne)(l.id,f)},{default:o(()=>[a(e(se))]),_:2},1032,["onClick"])])]),_:1}),a(m,{label:e(n)("Owner"),align:"center",width:"200"},{default:o(({row:l})=>[l.user_id?(u(),b("span",_e,[a(Y,null,{default:o(()=>[_(p(e(h)?.find(f=>f.id===l.user_id)?.username),1)]),_:2},1024)])):I("",!0)]),_:1},8,["label"]),a(m,{prop:"collection_id",label:e(n)("AddressBookName"),align:"center",width:"150"},{default:o(({row:l})=>[l.collection_id===0?(u(),b("span",fe,p(e(n)("MyAddressBook")),1)):(u(),b("span",ce,p(l.collection?.name),1))]),_:1},8,["label"]),a(m,{prop:"username",label:e(n)("Username"),align:"center",width:"150"},null,8,["label"]),a(m,{prop:"hostname",label:e(n)("Hostname"),align:"center",width:"150"},null,8,["label"]),a(m,{prop:"tags",label:e(n)("Tags"),align:"center"},null,8,["label"]),a(m,{prop:"alias",label:e(n)("Alias"),align:"center",width:"150"},null,8,["label"]),a(m,{prop:"peer.version",label:e(n)("Version"),align:"center",width:"100"},null,8,["label"]),a(m,{prop:"hash",label:e(n)("Hash"),align:"center",width:"150","show-overflow-tooltip":""},null,8,["label"]),a(m,{label:e(n)("Actions"),align:"center","class-name":"table-actions",width:"500",fixed:"right"},{default:o(({row:l})=>[a(V,{type:"success",onClick:f=>e(ee)(l.id)},{default:o(()=>[_(p(e(n)("Link")),1)]),_:2},1032,["onClick"]),e(q).setting.appConfig.web_client?(u(),k(V,{key:0,type:"success",onClick:f=>e(le)(l)},{default:o(()=>t[18]||(t[18]=[_("Web Client")])),_:2},1032,["onClick"])):I("",!0),a(V,{onClick:f=>e(S)(l)},{default:o(()=>[_(p(e(n)("Edit")),1)]),_:2},1032,["onClick"]),a(V,{type:"danger",onClick:f=>e(P)(l)},{default:o(()=>[_(p(e(n)("Delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[K,e(w).loading]])]),_:1}),a(x,{class:"list-page",shadow:"hover"},{default:o(()=>[a(G,{background:"",layout:"prev, pager, next, sizes, jumper","page-sizes":[10,20,50,100],"page-size":e(s).page_size,"onUpdate:pageSize":t[5]||(t[5]=l=>e(s).page_size=l),"current-page":e(s).page,"onUpdate:currentPage":t[6]||(t[6]=l=>e(s).page=l),total:e(w).total},null,8,["page-size","current-page","total"])]),_:1}),a(J,{modelValue:e(U),"onUpdate:modelValue":t[17]||(t[17]=l=>be(U)?U.value=l:null),width:"800",title:e(d).row_id?e(n)("Update"):e(n)("Create")},{default:o(()=>[a(D,{class:"dialog-form",ref:"form",model:e(d),"label-width":"120px"},{default:o(()=>[a(i,{label:e(n)("Owner"),prop:"user_id",required:""},{default:o(()=>[a(v,{modelValue:e(d).user_id,"onUpdate:modelValue":t[7]||(t[7]=l=>e(d).user_id=l),onChange:e(M)},{default:o(()=>[(u(!0),b(C,null,y(e(h),l=>(u(),k(c,{key:l.id,label:l.username,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),_:1},8,["label"]),a(i,{label:e(n)("AddressBookName")},{default:o(()=>[a(v,{modelValue:e(d).collection_id,"onUpdate:modelValue":t[8]||(t[8]=l=>e(d).collection_id=l),clearable:"",onChange:e(E)},{default:o(()=>[a(c,{value:0,label:e(n)("MyAddressBook")},null,8,["label"]),(u(!0),b(C,null,y(e(O).list,l=>(u(),k(c,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),_:1},8,["label"]),a(i,{label:"ID",prop:"id",required:""},{default:o(()=>[a(g,{modelValue:e(d).id,"onUpdate:modelValue":t[9]||(t[9]=l=>e(d).id=l)},null,8,["modelValue"])]),_:1}),a(i,{label:e(n)("Username"),prop:"username"},{default:o(()=>[a(g,{modelValue:e(d).username,"onUpdate:modelValue":t[10]||(t[10]=l=>e(d).username=l)},null,8,["modelValue"])]),_:1},8,["label"]),a(i,{label:e(n)("Alias"),prop:"alias"},{default:o(()=>[a(g,{modelValue:e(d).alias,"onUpdate:modelValue":t[11]||(t[11]=l=>e(d).alias=l)},null,8,["modelValue"])]),_:1},8,["label"]),a(i,{label:e(n)("Hash"),prop:"hash"},{default:o(()=>[a(g,{modelValue:e(d).hash,"onUpdate:modelValue":t[12]||(t[12]=l=>e(d).hash=l)},null,8,["modelValue"])]),_:1},8,["label"]),a(i,{label:e(n)("Hostname"),prop:"hostname"},{default:o(()=>[a(g,{modelValue:e(d).hostname,"onUpdate:modelValue":t[13]||(t[13]=l=>e(d).hostname=l)},null,8,["modelValue"])]),_:1},8,["label"]),a(i,{label:e(n)("Platform"),prop:"platform"},{default:o(()=>[a(v,{modelValue:e(d).platform,"onUpdate:modelValue":t[14]||(t[14]=l=>e(d).platform=l)},{default:o(()=>[(u(!0),b(C,null,y(e(L),l=>(u(),k(c,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),a(i,{label:e(n)("Tags"),prop:"tags"},{default:o(()=>[a(v,{modelValue:e(d).tags,"onUpdate:modelValue":t[15]||(t[15]=l=>e(d).tags=l),multiple:""},{default:o(()=>[(u(!0),b(C,null,y(e(Q).list,l=>(u(),k(c,{key:l.name,label:l.name,value:l.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),a(i,null,{default:o(()=>[a(V,{onClick:t[16]||(t[16]=l=>U.value=!1)},{default:o(()=>[_(p(e(n)("Cancel")),1)]),_:1}),a(V,{onClick:e($),type:"primary"},{default:o(()=>[_(p(e(n)("Submit")),1)]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},Ie=ae(ge,[["__scopeId","data-v-4afd367e"]]);export{Ie as default};
