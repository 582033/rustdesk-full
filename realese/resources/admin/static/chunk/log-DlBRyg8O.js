import{l as Q}from"./global-Czwz-x68.js";import{u as R}from"./log-rc-rtPjW.js";import{_ as T,T as r}from"../entry/index-Czm67r7X.js";import{l as j,aa as q,w as C,r as M,an as n,at as O,c as h,o as c,e,Y as a,u as t,P as Y,ah as Z,b as x,a0 as p,a1 as d,Z as $,_ as G}from"./_@vue-DEM3y_BF.js";import"./peer-DzPg3Mq6.js";import"./peer-D9oS7b6H.js";import"./file-Dmzv2BFm.js";import"./_element-plus-T6dmKOyC.js";import"./__vendor-BGruaAdM.js";import"./_@element-plus-CvluYIrs.js";import"./_@popperjs-DB1lLFnh.js";import"./_axios-BtuGy7By.js";const H={key:0},J={__name:"log",setup(K){const{allUsers:v,getAllUsers:z}=Q();z();const{listRes:_,listQuery:i,getList:m,handlerQuery:w,del:U,batchdel:D,toExport:A}=R("admin");j(m),q(m),C(()=>i.page,m),C(()=>i.page_size,w);const g=M([]),V=f=>{g.value=f},B=()=>{g.value.length!==0&&D(g.value)};return(f,s)=>{const S=n("el-option"),P=n("el-select"),y=n("el-form-item"),u=n("el-button"),E=n("el-form"),b=n("el-card"),o=n("el-table-column"),N=n("el-tag"),F=n("el-table"),I=n("el-pagination"),L=O("loading");return c(),h("div",null,[e(b,{class:"list-query",shadow:"hover"},{default:a(()=>[e(E,{inline:"","label-width":"80px"},{default:a(()=>[e(y,{label:t(r)("User")},{default:a(()=>[e(P,{modelValue:t(i).user_id,"onUpdate:modelValue":s[0]||(s[0]=l=>t(i).user_id=l),clearable:""},{default:a(()=>[(c(!0),h(Y,null,Z(t(v),l=>(c(),x(S,{key:l.id,label:l.username,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),e(y,null,{default:a(()=>[e(u,{type:"primary",onClick:t(w)},{default:a(()=>[p(d(t(r)("Filter")),1)]),_:1},8,["onClick"]),e(u,{type:"danger",onClick:B},{default:a(()=>[p(d(t(r)("BatchDelete")),1)]),_:1}),e(u,{type:"success",onClick:t(A)},{default:a(()=>[p(d(t(r)("Export")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),e(b,{class:"list-body",shadow:"hover"},{default:a(()=>[$((c(),x(F,{data:t(_).list,border:"",onSelectionChange:V},{default:a(()=>[e(o,{type:"selection",align:"center",width:"50"}),e(o,{prop:"id",label:"ID",align:"center",width:"100"}),e(o,{label:t(r)("Owner"),align:"center",width:"120"},{default:a(({row:l})=>[l.user_id?(c(),h("span",H,[e(N,null,{default:a(()=>[p(d(t(v)?.find(k=>k.id===l.user_id)?.username),1)]),_:2},1024)])):G("",!0)]),_:1},8,["label"]),e(o,{prop:"client",label:"client",align:"center",width:"120"}),e(o,{prop:"peer.id",label:t(r)("Peer"),align:"center"},{default:a(({row:l})=>[p(d(l.device_id?l.device_id:f.peer?.id),1)]),_:1},8,["label"]),e(o,{prop:"uuid",label:"uuid",align:"center"}),e(o,{prop:"ip",label:"ip",align:"center",width:"150"}),e(o,{prop:"type",label:"type",align:"center",width:"100"}),e(o,{prop:"platform",label:"Platform/UA",align:"center",width:"120","show-overflow-tooltip":""}),e(o,{prop:"created_at",label:t(r)("CreatedAt"),align:"center"},null,8,["label"]),e(o,{label:t(r)("Actions"),align:"center",width:"400"},{default:a(({row:l})=>[e(u,{type:"danger",onClick:k=>t(U)(l)},{default:a(()=>[p(d(t(r)("Delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[L,t(_).loading]])]),_:1}),e(b,{class:"list-page",shadow:"hover"},{default:a(()=>[e(I,{background:"",layout:"prev, pager, next, sizes, jumper","page-sizes":[10,20,50,100],"page-size":t(i).page_size,"onUpdate:pageSize":s[1]||(s[1]=l=>t(i).page_size=l),"current-page":t(i).page,"onUpdate:currentPage":s[2]||(s[2]=l=>t(i).page=l),total:t(_).total},null,8,["page-size","current-page","total"])]),_:1})])}}},de=T(J,[["__scopeId","data-v-df993bb6"]]);export{de as default};
