import{r as m,x as R,l as F,c as p,a as l,b as y,_ as f,a1 as h,u as c,P as X,ah as N,an as v,o as i,Y as t,e as n,af as k,a0 as H}from"./_@vue-DEM3y_BF.js";import{_ as P,u as W,g as z,r as j,T as s,a as q,l as _,c as $}from"../entry/index-Czm67r7X.js";import{aa as ee,ab as ae}from"./__vendor-BGruaAdM.js";import{b as Z}from"./_element-plus-T6dmKOyC.js";import"./_axios-BtuGy7By.js";import"./_@element-plus-CvluYIrs.js";import"./_@popperjs-DB1lLFnh.js";const oe="data:image/png;base64,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",te="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAERklEQVR4AdzaA7ArSRTG8cl99tq2bdu2bdu2bdu2dwvPtm2bF9/+16lU0Gd0e3aqfnFOz/nC7iRIelt26WVWwym4H5+hLyZgDgRwmsvQF5/ifpyM1YKsbex0FXbHCxgBRTQCL2B3VPnc+DK4E6OhhIzGnVjap8ZXwuOYD6VkPh7HSvXZeCNcjblQPZmLq9Eo7ea3RD/IE/2wZRqN53ApFkKeWYhLkEuq+Wb4APLcB2gWd/Nt0A7KiHZoE2fzXaGM6YI2UZtvjvZQRrVH8yhveJ9AGfcJcmECuAr6n7jK2vz2qIYq2A2b41S8i/lQwubjXZyKzbEbVEE1tndtvgkGQxV0K3LfxXAdpkExm47rsFiRcbtBFQxGE5cAboEcPFSmxmJ4ArUQhMn4Da/hXlyJSwBOcxlew2+YDAHUoBYWKzPew5CDWyo1vwYWQA5Oc/zKfBJWDfEetCpOwpYOtz0NcrAAa5Qr9DzkaD+PZqT7QY6eL1VkFSyCHB3sUQCHQI4WYZViRR6BDM7wKIAzIINHis3tJ0IGz3gUwDOQwUQ0yi9wEGTUxaMAukBGB+UXeBMyWIRtPApgGyyCDN7MLzABMrjZw0XZmyCDCf/ccX3IYCyaehhAU4yBDNYPODgHMrjB46X5GyCDcwIOHoUM1vQ4gLUgg0cDDr6BHI0OPN+ML4NvAg4GQY5+zEAAP0KOBgUcTIYcvZWBAN6GHE0JnGd/wGsZCOA1yNGCwLq+loEAPoVcGQLIzHvAT9YA5kGOhmQggCGQo3mBcRZYjWYeN98M1ZCjiWFmUjt7HMAu5hktBx9BBvd5HMB9kMFHAQd3QAbDUOXpf5OGQQZ3hF0MOc7DAI4LtSjCwTKQ0VA096j55hgGGS0TZUnpJY8CeCnSkp79fQDATR40fwsUwh35RdaDQnoBTevpM/8FKKT1Cgt2gEIahIORS+mPWodjCBRSh2KFT4GK+Bk741C8UGH22AuXYrWEVnuuQj8oolOKDdAQo6ACo7FB3u3WcdyJ4XgNV+EQNDE02wpH4ya8gzFQTEahYamBz4WKmIuT8263NAZDjl5Hzvg0fwVKwLnlBm6IPi6/B3J6a9RCFUxF6xBP+daYAsWoDxpWGnhPqIQFBS+HW51WXk2b/Y8PBnu6Dvw8VMI3BU/Ve6AyDowQwP5QTJ63DNyywsfMJgW33xZvYjBmYCg+wiloEiGANaAYDEFL6+AbYQ5UxPspfdlZDIpoDjYKuwNHlHmjOzwDAdTiiKg7cQ5UxDwc6XkA58S1I5dAJXyI7ZDzLIBL4t6ZkyssOE7Gr/gMX6ADZmCxlAOoxslJPSV3xUTIIM0AJmLXpN+YVsSvHgbwK1ZMay6ew4WY40EAc3AxcvWxGrMCXkEdVMJyEeovDZVQh1exgg9rchvgdSyCCiwdoe5SUIFqvI4NfPxhYgVchwEQ3omh5jsQBuA6/D4qxvgoGAUAsc/MQ8yReXMAAAAASUVORK5CYII=",K="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAGYktHRAD/AP8A/6C9p5MAAAAHdElNRQfoCh4PKw5WIZwRAAAGlUlEQVR42u3ba4xdVRUH8N+9vfNq6/Q1LUXog/JUEKltUeGD1VprfAxCTAAlvmJ8xSqaGA1+kMRXNEZjUdFgiAGMIWqEgghJtYghPKMBgamKkmlJ6WgZpu2kTNvpXD+sc6e3t3fuPfe2M2dm6D856eSce/be//9Ze+2119rlFY5c1gMox8s3LK16v2Pj9nHrs5A16TGId2IpenB4PPvOVIAxiL8Tn8JLuHpaClCF+Dy8Cx/HJWjFvRMxlgkVoArxBejGx/BGtJQ9K047AcqwCO9LiK/GjIzGkYkAnbhJfPnMkc+gz1aclTXxLAWAkayJZy3ApMFJAbIeQNY4KUDWA8gaJwXIegBZ4xUvwISEwps3b44/ejdqdI9TzM0Yfb+7+8RHzydUgFGiY+D52Zc4ffDBBlrMeeyUa2u2f7yiHLcANUi3i13fEqzAime6rtly1sCdPUOFrlRttx/oLe5pW3EZxQvwLJ7DDryIg9X6b1SQpgQYg3QhIbtS7O1Xik3PQsxCTrG426H9T6fudVCR4tvwObF/2Ic+/BN/xcN4Ei8kz48aWzUxKsfekABViOfF112LDViD02q028wmqJQSy2NOcp2D9+AAtuMhkUH6C56vHG93d3e1sedQTCVAlZdn4lJcibeLBGYWGeY2nJ1cHxTT5B78Go/jUJXxt+O9Ylv+y5oCjEF8g8jdvUWY9mTBDJybXB/Bffg5HkiEyOPN+LzIRv2qpgAV5PMJ4S9gfaJiM2gm7mgmXTYPV4lE6+9wu/hw14g8JMxHa1UBKsi/Gl8U+bt5TQxmAL3YVszl/qalI/1UaYfcVorLhJkvxewG+u7Eh8VUrfxo89F+jAAV5Nfi23hTg6T78Ci2CE/9b7x0Xv9vRoYKC9OtgRiatTQ/98Czdwy0nXm3+HLnCN+zDquk/yDVLHYuZh8lQBn5fKLct7A4ZScj+LtwQHdhm2StLmHZ3j82qCOrd/3QlmWbhhNR+4Sn34TX4YrkaibH2InOUQHKyBeEo7heenN7Cj/Fb7Gr8mFpPR6r9lcLOSOj75eNcT8eSa6f4EO4Vph1WszE/EJFwzlsxNfRkaKRPSLFfYNYj48hfSIxxnpeFCbeqLPsQFehosErxZdPQ74HX8HdygKc8SBeQsVYF4ja4Wfwmiaaa8Gich9wIb4p5kY9PIRP44nym+NJvgIXCytdr/kArIDFJQHacZ0Ia+vhMbEkbsuAeAnb8V1hfRfhfCwXVtFIeH9q6ccbpCtV7RAOMkvyhKPdhdKy0in2IOfh9cl1bnKvlkUvLoj5/lH15/1hfE+Yfybky/ur8Ad7k6tHRH4FYQ3LhXWsxAU4U2zR25L3TiskDy9N0f+juC0r8rXEqCJKedzwSHJvpohpzhb+7g2YURBR1QL1cTv6JwP5tKJUWMl+/Ce57hPB3qyCSF7U86T9Ylc1pVDHSkawr4AzUrS1UzjASfv1mxUlj1eleG8PXs568OOBvHSnsAqmaQ0hj90pfrdQ5OLqpr6nGvJ4JsXvTtVcvD3pkXckZ1YLHSILi+llBXncLwoO9XC5iKamFfIiXXVXit8uwZckYeR0sYKSZ/+FZJ2vg6vENth0EaEkwFP4sfql21Z8TeTdR0WYykKUr+0/Qxomc/EDkYMr7aqmrAj5stBwAF8WRcc0InxHZGeXl4sw1YSojO7+Ic7qP53i3VZ8AneKrOxoSD2VhBjdBVYMeDVuTP5Ng0P4s6jFbRH1+2Owvvez0IWt6i+pfxA1vIPj+V9mRi2gYpf0OD6AO6Q709IiqsS3JgP/aiLeUXWF5+a8Q27yHBM+WoAqIvxLpMquN8YXHUOINfiGSDr8XpTWrsBre+ZfPW9P6/KWlG1NCKomQqrM37WiBrBOc6dKhtFPbmfb4YH/rdn1/YtnDu+eU6ydh7kXlxnnKVCVTJVS1P1idXi/cJKrNLY9Lohk5KKRXIvhfLuYWTUF6DcBx+prkqiYEntxM96NTwqn10SSpFjv4ZNiOb5OWM64InVVpcq06BTZ5MvxVhEP1JkeOS0jg1b1bdJ5cIfiEf2HheO9RTjeF8rfGs8p0HBZaYzDRkvEGYJ1omx1hiSBUkeAITwo9iL3SLLOE0G8aQFqCFHCAlGvv9CRCs0SdJGb1TIy2Laq70eDnQd6txZz+ZvxJ3H8bUKJH7cAKcUg6o7zsJDcotbD+045/8Vbdp6+74GHhwpdR/mQiSR+QgVIL0hOy8g+F/33Jov2P+HgjNmZET+JBP8H1NLMnma3yNIAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjQtMTAtMzBUMTU6NDM6MDQrMDA6MDBJQSvHAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDI0LTEwLTMwVDE1OjQzOjA0KzAwOjAwOByTewAAACh0RVh0ZGF0ZTp0aW1lc3RhbXAAMjAyNC0xMC0zMFQxNTo0MzoxNCswMDowMKOjsjoAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC",se={class:"login-container"},Ae={class:"login-card"},ne=["src"],le={key:1,class:"divider"},ce={class:"oidc-options"},ie=["src"],re={__name:"login",setup(de){m({});const I=W(),M=ee(),w=ae(),B=R([]);let r=window.navigator.platform;navigator.platform.indexOf("Mac")===0?r="mac":navigator.platform.indexOf("Win")===0?r="windows":navigator.platform.indexOf("Linux armv")===0?r="android":navigator.platform.indexOf("Linux")===0&&(r="linux");const d=navigator.userAgent;let g="Unknown Browser";/chrome|crios/i.test(d)?g="Chrome":/firefox|fxios/i.test(d)?g="Firefox":/safari/i.test(d)&&!/chrome/i.test(d)?g="Safari":/edg/i.test(d)&&(g="Edge");const A=R({username:"",password:"",platform:r,captcha:"",captcha_id:""}),C=m(""),Q=M.query?.redirect,D=async()=>{const e=await I.login(A).catch(a=>a);if(!e.code){Z.success(s("LoginSuccess")),w.push({path:Q||"/",replace:!0});return}e.code===110&&Y()},Y=async()=>{const e=await $().catch(a=>!1);console.log(e),C.value=e.data.captcha,A.captcha_id=e.data.captcha.id},x=e=>{I.oidc(e,r,g)},V={google:oe,github:te,oidc:K,default:K},S=e=>V[e.toLowerCase()]||V.default,G=m(!1),E=m(!1),T=async()=>{try{const e=await _().catch(a=>!1);if(!e||!e.data)return console.error("No valid response received");e.data.ops.map(a=>B.push({name:a})),e.data.auto_oidc&&x(e.data.ops[0]),E.value=e.data.disable_pwd,G.value=e.data.register,e.data.need_captcha&&Y()}catch(e){console.error("Error loading login options:",e.message)}};F(async()=>{const e=z();e?await I.query(e)&&(j(),Z.success(s("LoginSuccess")),w.push({path:Q||"/",replace:!0})):T()});const O=()=>{w.push("/register")};return(e,a)=>{const b=v("el-input"),u=v("el-form-item"),U=v("el-button"),L=v("el-form");return i(),p("div",se,[l("div",Ae,[a[3]||(a[3]=l("img",{src:q,alt:"logo",class:"login-logo"},null,-1)),E.value?f("",!0):(i(),y(L,{key:0,"label-position":"top",class:"login-form"},{default:t(()=>[n(u,{label:c(s)("Username")},{default:t(()=>[n(b,{modelValue:A.username,"onUpdate:modelValue":a[0]||(a[0]=o=>A.username=o),type:"username",class:"login-input"},null,8,["modelValue"])]),_:1},8,["label"]),n(u,{label:c(s)("Password")},{default:t(()=>[n(b,{modelValue:A.password,"onUpdate:modelValue":a[1]||(a[1]=o=>A.password=o),type:"password",onKeyup:k(D,["enter","native"]),"show-password":"",class:"login-input"},null,8,["modelValue"])]),_:1},8,["label"]),C.value?(i(),y(u,{key:0,label:c(s)("Captcha")},{default:t(()=>[n(b,{modelValue:A.captcha,"onUpdate:modelValue":a[2]||(a[2]=o=>A.captcha=o),onKeyup:k(D,["enter","native"]),class:"login-input captcha-input"},{append:t(()=>[l("img",{src:C.value.b64,onClick:Y,class:"captcha",alt:"captcha"},null,8,ne)]),_:1},8,["modelValue"])]),_:1},8,["label"])):f("",!0),n(u,null,{default:t(()=>[n(U,{onClick:D,type:"primary",class:"login-button"},{default:t(()=>[H(h(c(s)("Login")),1)]),_:1}),G.value?(i(),y(U,{key:0,onClick:O,class:"login-button"},{default:t(()=>[H(h(c(s)("Register")),1)]),_:1})):f("",!0)]),_:1})]),_:1})),B.length>0&&!E.value?(i(),p("div",le,[l("span",null,h(c(s)("or login in with")),1)])):f("",!0),l("div",ce,[(i(!0),p(X,null,N(B,(o,J)=>(i(),p("div",{key:J,class:"oidc-option"},[n(U,{onClick:ge=>x(o.name),class:"oidc-btn"},{default:t(()=>[l("img",{src:S(o.name),alt:"provider",class:"oidc-icon"},null,8,ie),l("span",null,h(c(s)(o.name)),1)]),_:2},1032,["onClick"])]))),128))])])])}}},we=P(re,[["__scopeId","data-v-1dd7ab39"]]);export{we as default};
