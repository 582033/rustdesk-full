import{s as K,T as n,_ as se}from"../entry/index-Czm67r7X.js";import{b as B,c as ge}from"./_element-plus-T6dmKOyC.js";import{x as N,w as F,an as o,at as P,Z as j,b as E,o as x,Y as t,e,a0 as i,a1 as c,u as d,a as k,c as X,_ as W,r as G,l as J}from"./_@vue-DEM3y_BF.js";import"./__vendor-BGruaAdM.js";import"./_axios-BtuGy7By.js";import"./_@element-plus-CvluYIrs.js";import"./_@popperjs-DB1lLFnh.js";function be(p){return K({url:"/rustdesk/cmdList",params:p})}function ye(p){return K({url:"/rustdesk/cmdCreate",method:"post",data:p})}function Se(p){return K({url:"/rustdesk/cmdUpdate",method:"post",data:p})}function ke(p){return K({url:"/rustdesk/cmdDelete",method:"post",data:p})}function U(p){return K({url:"/rustdesk/sendCmd",method:"post",data:p})}const Y="21115",h="21117",Ce={key:0},Ve={__name:"blocklist",props:{canSend:Boolean},setup(p){const R=p,l=N({get_cmd:"blocklist",add_cmd:"blocklist-add",remove_cmd:"blocklist-remove",list:[],target:h,loading:!1,form_visible:!1,form_input:"",form_type:""}),g=async()=>{l.loading=!0;const s=await U({cmd:l.get_cmd,target:h}).catch(a=>!1);l.loading=!1,s&&(l.list=s.data.split(`
`).filter(a=>a))},f=s=>{l.form_visible=!0,l.form_input="",l.form_type=s},v=async()=>{await U({cmd:l.add_cmd,option:l.form_input,target:h}).catch(a=>!1)&&(B.success(n("OperationSuccess")),g())},u=async()=>{await U({cmd:l.remove_cmd,option:l.form_input,target:h}).catch(a=>!1)&&(B.success(n("OperationSuccess")),g())};return F(()=>R.canSend,s=>{s&&g()}),(s,a)=>{const V=o("el-input"),S=o("el-form-item"),b=o("el-button"),C=o("el-form"),$=o("el-dialog"),I=o("el-card"),D=P("loading");return j((x(),E(I,{class:"simple-card",shadow:"hover"},{header:t(()=>a[6]||(a[6]=[k("div",{class:"card-header"},[k("span",null,"BLOCK_LIST")],-1)])),default:t(()=>[e(C,{disabled:!p.canSend},{default:t(()=>[e(S,null,{default:t(()=>[e(V,{type:"textarea","model-value":l.list.join("|"),rows:5},null,8,["model-value"])]),_:1}),e(S,null,{default:t(()=>[e(b,{onClick:g},{default:t(()=>[i(c(d(n)("Refresh")),1)]),_:1}),e(b,{onClick:a[0]||(a[0]=w=>f("add")),type:"primary"},{default:t(()=>[i(c(d(n)("Add")),1)]),_:1}),e(b,{onClick:a[1]||(a[1]=w=>f("delete")),type:"danger"},{default:t(()=>[i(c(d(n)("Delete")),1)]),_:1})]),_:1})]),_:1},8,["disabled"]),e($,{modelValue:l.form_visible,"onUpdate:modelValue":a[5]||(a[5]=w=>l.form_visible=w),title:l.form_type},{default:t(()=>[e(C,{"label-width":"100px"},{default:t(()=>[e(S,{label:"IP"},{default:t(()=>[e(V,{modelValue:l.form_input,"onUpdate:modelValue":a[2]||(a[2]=w=>l.form_input=w)},null,8,["modelValue"]),a[8]||(a[8]=k("div",null,"多个IP以 | 分割",-1)),l.form_type==="delete"?(x(),X("div",Ce,a[7]||(a[7]=[i(", 全部填 "),k("strong",null,"all",-1)]))):W("",!0)]),_:1}),e(S,null,{default:t(()=>[e(b,{onClick:a[3]||(a[3]=w=>l.form_visible=!1)},{default:t(()=>[i(c(d(n)("Cancel")),1)]),_:1}),e(b,{onClick:a[4]||(a[4]=w=>l.form_type==="add"?v():u()),type:"primary"},{default:t(()=>[i(c(d(n)("Submit")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","title"])]),_:1})),[[D,l.loading]])}}},we={key:0},xe={__name:"blacklist",props:{canSend:Boolean},setup(p){const R=p,l=N({get_cmd:"blacklist",add_cmd:"blacklist-add",remove_cmd:"blacklist-remove",list:[],target:h,loading:!1,form_visible:!1,form_input:"",form_type:""}),g=async()=>{l.loading=!0;const s=await U({cmd:l.get_cmd,target:h}).catch(a=>!1);l.loading=!1,s&&(l.list=s.data.split(`
`).filter(a=>a))},f=s=>{l.form_visible=!0,l.form_input="",l.form_type=s},v=async()=>{await U({cmd:l.add_cmd,option:l.form_input,target:h}).catch(a=>!1)&&(B.success(n("OperationSuccess")),g())},u=async()=>{await U({cmd:l.remove_cmd,option:l.form_input,target:h}).catch(a=>!1)&&(B.success(n("OperationSuccess")),g())};return F(()=>R.canSend,s=>{s&&g()}),(s,a)=>{const V=o("el-input"),S=o("el-form-item"),b=o("el-button"),C=o("el-form"),$=o("el-dialog"),I=o("el-card"),D=P("loading");return j((x(),E(I,{class:"simple-card",shadow:"hover"},{header:t(()=>a[6]||(a[6]=[k("div",{class:"card-header"},[k("span",null,"BLACK_LIST")],-1)])),default:t(()=>[e(C,{disabled:!p.canSend},{default:t(()=>[e(S,null,{default:t(()=>[e(V,{type:"textarea","model-value":l.list.join("|"),rows:5},null,8,["model-value"])]),_:1}),e(S,null,{default:t(()=>[e(b,{onClick:g},{default:t(()=>[i(c(d(n)("Refresh")),1)]),_:1}),e(b,{onClick:a[0]||(a[0]=w=>f("add")),type:"primary"},{default:t(()=>[i(c(d(n)("Add")),1)]),_:1}),e(b,{onClick:a[1]||(a[1]=w=>f("delete")),type:"danger"},{default:t(()=>[i(c(d(n)("Delete")),1)]),_:1})]),_:1})]),_:1},8,["disabled"]),e($,{modelValue:l.form_visible,"onUpdate:modelValue":a[5]||(a[5]=w=>l.form_visible=w),title:l.form_type},{default:t(()=>[e(C,{"label-width":"100px"},{default:t(()=>[e(S,{label:"IP"},{default:t(()=>[e(V,{modelValue:l.form_input,"onUpdate:modelValue":a[2]||(a[2]=w=>l.form_input=w)},null,8,["modelValue"]),a[8]||(a[8]=k("div",null,"多个IP以 | 分割",-1)),l.form_type==="delete"?(x(),X("div",we,a[7]||(a[7]=[i(", 全部填 "),k("strong",null,"all",-1)]))):W("",!0)]),_:1}),e(S,null,{default:t(()=>[e(b,{onClick:a[3]||(a[3]=w=>l.form_visible=!1)},{default:t(()=>[i(c(d(n)("Cancel")),1)]),_:1}),e(b,{onClick:a[4]||(a[4]=w=>l.form_type==="add"?v():u()),type:"primary"},{default:t(()=>[i(c(d(n)("Submit")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","title"])]),_:1})),[[D,l.loading]])}}},Ae={__name:"always_use_relay",props:{canSend:Boolean},emits:"success",setup(p,{emit:R}){const l=R,g=p,f=N({cmd:"aur",option:"",target:Y,value:0,loading:!1}),v=async()=>{f.loading=!0;const s=await U({cmd:"aur",target:Y}).catch(a=>!1);f.loading=!1,s&&(s.data==="ALWAYS_USE_RELAY: true"||s.data===`ALWAYS_USE_RELAY: true
`?f.option="Y":f.option="N")},u=async()=>{await U(f).catch(a=>!1)&&(B.success(n("OperationSuccess")),l("success"))};return F(()=>g.canSend,s=>{s&&v()}),(s,a)=>{const V=o("el-switch"),S=o("el-form-item"),b=o("el-button"),C=o("el-form"),$=o("el-card"),I=P("loading");return j((x(),E($,{class:"simple-card",shadow:"hover"},{header:t(()=>a[1]||(a[1]=[k("div",{class:"card-header"},[k("span",null,"ALWAYS_USE_RELAY")],-1)])),default:t(()=>[e(C,{disabled:!p.canSend},{default:t(()=>[e(S,null,{default:t(()=>[e(V,{modelValue:f.option,"onUpdate:modelValue":a[0]||(a[0]=D=>f.option=D),"active-value":"Y","inactive-value":"N"},null,8,["modelValue"])]),_:1}),e(S,null,{default:t(()=>[e(b,{onClick:v},{default:t(()=>[i(c(d(n)("Refresh")),1)]),_:1}),e(b,{onClick:u,type:"primary"},{default:t(()=>[i(c(d(n)("Save")),1)]),_:1})]),_:1})]),_:1},8,["disabled"])]),_:1})),[[I,f.loading]])}}},Ue={__name:"relay_servers",props:{canSend:Boolean},setup(p,{expose:R}){const l=p,g=N({cmd:"rs",option:"",target:Y,loading:!1}),f=async()=>{g.loading=!0;const u=await U({cmd:"rs",target:Y}).catch(s=>!1);if(g.loading=!1,u){const s=u.data.split(`
`).filter(a=>a);g.option=s.join(",")}},v=async()=>{await U(g).catch(s=>!1)&&B.success(n("OperationSuccess"))};return F(()=>l.canSend,u=>{u&&f()}),R({save:v}),(u,s)=>{const a=o("el-input"),V=o("el-form-item"),S=o("el-button"),b=o("el-form"),C=o("el-card"),$=P("loading");return j((x(),E(C,{class:"simple-card",shadow:"hover"},{header:t(()=>s[1]||(s[1]=[k("div",{class:"card-header"},[k("span",null,"RELAY_SERVERS")],-1)])),default:t(()=>[e(b,{disabled:!p.canSend},{default:t(()=>[e(V,null,{default:t(()=>[e(a,{modelValue:g.option,"onUpdate:modelValue":s[0]||(s[0]=I=>g.option=I)},null,8,["modelValue"])]),_:1}),e(V,null,{default:t(()=>[e(S,{onClick:f},{default:t(()=>[i(c(d(n)("Refresh")),1)]),_:1}),e(S,{onClick:v,type:"primary"},{default:t(()=>[i(c(d(n)("Save")),1)]),_:1})]),_:1})]),_:1},8,["disabled"])]),_:1})),[[$,g.loading]])}}},Re={__name:"must_login",props:{canSend:Boolean},setup(p){const R=p,l=N({cmd:"ml",option:"",target:Y,value:0,loading:!1}),g=async()=>{l.loading=!0;const v=await U({cmd:"ml",target:Y}).catch(u=>!1);l.loading=!1,v&&(v.data==="MUST_LOGIN: true"||v.data===`MUST_LOGIN: true
`?l.option="Y":l.option="N")},f=async()=>{await U(l).catch(u=>!1)&&B.success(n("OperationSuccess"))};return F(()=>R.canSend,v=>{v&&g()}),(v,u)=>{const s=o("el-switch"),a=o("el-form-item"),V=o("el-button"),S=o("el-form"),b=o("el-card"),C=P("loading");return j((x(),E(b,{class:"simple-card",shadow:"hover"},{header:t(()=>u[1]||(u[1]=[k("div",{class:"card-header"},[k("span",null,"MUST_LOGIN")],-1)])),default:t(()=>[e(S,{disabled:!p.canSend},{default:t(()=>[e(a,null,{default:t(()=>[e(s,{modelValue:l.option,"onUpdate:modelValue":u[0]||(u[0]=$=>l.option=$),"active-value":"Y","inactive-value":"N"},null,8,["modelValue"])]),_:1}),e(a,null,{default:t(()=>[e(V,{onClick:g},{default:t(()=>[i(c(d(n)("Refresh")),1)]),_:1}),e(V,{onClick:f,type:"primary"},{default:t(()=>[i(c(d(n)("Save")),1)]),_:1})]),_:1})]),_:1},8,["disabled"])]),_:1})),[[C,l.loading]])}}},Le={__name:"usage",props:{canSend:Boolean},setup(p){const R=p,l=N({get_cmd:"u",list:[],target:h,loading:!1}),g=async()=>{l.loading=!0;const f=await U({cmd:l.get_cmd,target:h}).catch(v=>!1);l.loading=!1,f&&(l.list=f.data.split(`
`).filter(v=>v).map(v=>v.split(" ")))};return F(()=>R.canSend,f=>{f&&g()}),(f,v)=>{const u=o("el-table-column"),s=o("el-table"),a=o("el-form-item"),V=o("el-button"),S=o("el-form"),b=o("el-card"),C=P("loading");return j((x(),E(b,{class:"simple-card",shadow:"hover"},{header:t(()=>v[0]||(v[0]=[k("div",{class:"card-header"},[k("span",null,"USAGE")],-1)])),default:t(()=>[e(S,{disabled:!p.canSend},{default:t(()=>[e(a,null,{default:t(()=>[e(s,{data:l.list,size:"small"},{default:t(()=>[e(u,{prop:"0",label:"IP"}),e(u,{prop:"1",label:"TIME"}),e(u,{prop:"2",label:"TOTAL"}),e(u,{prop:"3",label:"HIGHEST"}),e(u,{prop:"4",label:"AVG"}),e(u,{prop:"5",label:"SPEED"})]),_:1},8,["data"])]),_:1}),e(a,null,{default:t(()=>[e(V,{onClick:g},{default:t(()=>[i(c(d(n)("Refresh")),1)]),_:1})]),_:1})]),_:1},8,["disabled"])]),_:1})),[[C,l.loading]])}}},Ee=se(Le,[["__scopeId","data-v-c1afa130"]]),$e=["innerHTML"],he={__name:"control",setup(p){const R=G("Simple"),l=G(!1),g=async()=>{const m=await U({cmd:"h",target:Y}).catch(r=>!1);if(l.value=!!m.data,l.value){const r=m.data.split(`
`).filter(O=>O);console.log(r),f.value=r.some(O=>O.includes("must-login"))}},f=G(!1),v=()=>{g()};J(v);const u=G(!1),s=async()=>{const m=await U({cmd:"h",target:h}).catch(r=>!1);u.value=!!m.data},a=()=>{s()};J(a);const V=G(null),S=()=>{V.value.save()},b=m=>m===Y?l.value:m===h?u.value:!1,C=N({list:[],total:0,loading:!1}),$=N({page:1,page_size:10}),I=async()=>{C.loading=!0;const m=await be($).catch(r=>!1);C.loading=!1,m&&(C.list=m.data.list,C.total=m.data.total)},D=()=>{$.page===1?I():$.page=1};J(I);const w=async m=>{if(!await ge.confirm(n("Confirm?",{param:n("Delete")}),{confirmButtonText:n("Confirm"),cancelButtonText:n("Cancel"),type:"warning"}).catch(L=>!1))return!1;await ke({id:m.id}).catch(L=>!1)&&(B.success(n("OperationSuccess")),I())},y=N({cmd:"",alias:"",option:"",target:"",explain:""}),z=G(!1),de=()=>{z.value=!0,y.cmd="",y.alias="",y.option="",y.explain=""},ie=m=>{z.value=!0,y.id=m.id,y.cmd=m.cmd,y.alias=m.alias,y.option=m.option,y.target=m.target,y.explain=m.explain},re=async()=>{if(!y.cmd){B.error(n("ParamRequired",{param:"cmd"}));return}await(y.id?Se:ye)(y).catch(O=>!1)&&(B.success(n("OperationSuccess")),z.value=!1,I())},ce=()=>{z.value=!1},q=G(!1),A=N({cmd:"",option:"",target:"",res:"",example:""}),Q=m=>{q.value=!0,A.cmd=m.cmd,A.option="",A.res="",A.target=m.target,A.example=`${m.cmd} ${m.option}`},ue=async()=>{U(A).then(m=>{console.log(m),A.res=m.data,B.success(n("OperationSuccess"))})};return(m,r)=>{const O=o("el-tag"),L=o("el-button"),me=o("el-space"),ee=o("el-tab-pane"),T=o("el-form-item"),Z=o("el-form"),te=o("el-card"),H=o("el-table-column"),_e=o("el-table"),M=o("el-input"),le=o("el-radio"),pe=o("el-radio-group"),ae=o("el-dialog"),ne=o("el-text"),fe=o("el-tabs"),ve=P("loading");return x(),X("div",null,[k("h4",{innerHTML:d(n)("ServerCmdTips",{wiki:"<a target='_blank' href='https://github.com/lejianwen/rustdesk-api/wiki/Rustdesk-Command'>WIKI</a>"})},null,8,$e),k("h5",null,[k("span",null,"ID "+c(d(n)("Status"))+": ",1),l.value?(x(),E(O,{key:0,type:"success"},{default:t(()=>[i(c(d(n)("Available")),1)]),_:1})):(x(),E(O,{key:1,type:"danger"},{default:t(()=>[i(c(d(n)("NotAvailable")),1)]),_:1})),e(L,{size:"small",type:"text",onClick:v},{default:t(()=>[i(c(d(n)("Refresh")),1)]),_:1})]),k("h5",null,[k("span",null,"RELAY "+c(d(n)("Status"))+": ",1),u.value?(x(),E(O,{key:0,type:"success"},{default:t(()=>[i(c(d(n)("Available")),1)]),_:1})):(x(),E(O,{key:1,type:"danger"},{default:t(()=>[i(c(d(n)("NotAvailable")),1)]),_:1})),e(L,{size:"small",type:"text",onClick:a},{default:t(()=>[i(c(d(n)("Refresh")),1)]),_:1})]),e(fe,{modelValue:R.value,"onUpdate:modelValue":r[12]||(r[12]=_=>R.value=_),type:"card"},{default:t(()=>[e(ee,{label:d(n)("Simple"),name:"Simple"},{default:t(()=>[e(me,{wrap:""},{default:t(()=>[e(Ue,{ref_key:"rs",ref:V,"can-send":l.value},null,8,["can-send"]),e(Ae,{"can-send":l.value,onSuccess:S},null,8,["can-send"]),e(Re,{"can-send":f.value&&l.value},null,8,["can-send"]),e(Ee,{"can-send":u.value},null,8,["can-send"]),e(Ve,{"can-send":u.value},null,8,["can-send"]),e(xe,{"can-send":u.value},null,8,["can-send"])]),_:1})]),_:1},8,["label"]),e(ee,{label:d(n)("Advanced"),name:"Advanced"},{default:t(()=>[e(te,{class:"list-query",shadow:"hover"},{default:t(()=>[e(Z,{inline:"","label-width":"80px"},{default:t(()=>[e(T,null,{default:t(()=>[e(L,{type:"primary",onClick:D},{default:t(()=>[i(c(d(n)("Filter")),1)]),_:1}),e(L,{type:"danger",onClick:de},{default:t(()=>[i(c(d(n)("Add")),1)]),_:1}),e(L,{type:"success",disabled:!l.value,onClick:r[0]||(r[0]=_=>Q({cmd:"",option:"",target:d(Y)}))},{default:t(()=>[i(c(d(n)("Send"))+" To Id",1)]),_:1},8,["disabled"]),e(L,{type:"success",disabled:!u.value,onClick:r[1]||(r[1]=_=>Q({cmd:"",option:"",target:d(h)}))},{default:t(()=>[i(c(d(n)("Send"))+" To Relay",1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1}),e(te,{class:"list-body",shadow:"hover"},{default:t(()=>[j((x(),E(_e,{data:C.list,border:""},{default:t(()=>[e(H,{prop:"cmd",label:"cmd",align:"center"}),e(H,{prop:"alias",label:"alias",align:"center"}),e(H,{prop:"option",label:"option",align:"center"}),e(H,{prop:"explain",label:"explain",align:"center"}),e(H,{label:"actions",align:"center"},{default:t(({row:_})=>[e(L,{type:"success",disabled:!b(_.target),onClick:oe=>Q(_)},{default:t(()=>[i(c(d(n)("Send")),1)]),_:2},1032,["disabled","onClick"]),_.id?(x(),E(L,{key:0,type:"primary",onClick:oe=>ie(_)},{default:t(()=>[i(c(d(n)("Edit")),1)]),_:2},1032,["onClick"])):W("",!0),_.id?(x(),E(L,{key:1,type:"danger",onClick:oe=>w(_)},{default:t(()=>[i(c(d(n)("Delete")),1)]),_:2},1032,["onClick"])):W("",!0)]),_:1})]),_:1},8,["data"])),[[ve,C.loading]]),e(ae,{modelValue:z.value,"onUpdate:modelValue":r[7]||(r[7]=_=>z.value=_)},{default:t(()=>[e(Z,{"label-width":"150"},{default:t(()=>[e(T,{label:"cmd"},{default:t(()=>[e(M,{modelValue:y.cmd,"onUpdate:modelValue":r[2]||(r[2]=_=>y.cmd=_)},null,8,["modelValue"])]),_:1}),e(T,{label:"alias"},{default:t(()=>[e(M,{modelValue:y.alias,"onUpdate:modelValue":r[3]||(r[3]=_=>y.alias=_)},null,8,["modelValue"])]),_:1}),e(T,{label:"option"},{default:t(()=>[e(M,{modelValue:y.option,"onUpdate:modelValue":r[4]||(r[4]=_=>y.option=_)},null,8,["modelValue"])]),_:1}),e(T,{label:"target"},{default:t(()=>[e(pe,{modelValue:y.target,"onUpdate:modelValue":r[5]||(r[5]=_=>y.target=_)},{default:t(()=>[e(le,{label:"id_server",value:"21115"}),e(le,{label:"relay_server",value:"21117"})]),_:1},8,["modelValue"])]),_:1}),e(T,{label:"explain"},{default:t(()=>[e(M,{modelValue:y.explain,"onUpdate:modelValue":r[6]||(r[6]=_=>y.explain=_)},null,8,["modelValue"])]),_:1}),e(T,null,{default:t(()=>[e(L,{type:"primary",onClick:re},{default:t(()=>[i(c(d(n)("Submit")),1)]),_:1}),e(L,{onClick:ce},{default:t(()=>[i(c(d(n)("Cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(ae,{title:d(n)("SendCmd"),modelValue:q.value,"onUpdate:modelValue":r[11]||(r[11]=_=>q.value=_)},{default:t(()=>[e(Z,{"label-width":"150",disabled:!b(A.target)},{default:t(()=>[e(T,{label:"cmd"},{default:t(()=>[e(M,{modelValue:A.cmd,"onUpdate:modelValue":r[8]||(r[8]=_=>A.cmd=_)},null,8,["modelValue"])]),_:1}),e(T,{label:"option"},{default:t(()=>[e(M,{modelValue:A.option,"onUpdate:modelValue":r[9]||(r[9]=_=>A.option=_)},null,8,["modelValue"]),A.example.trim()?(x(),E(ne,{key:0,style:{"margin-top":"5px"}},{default:t(()=>[r[13]||(r[13]=i("Example: ")),e(ne,{type:"primary"},{default:t(()=>[i(c(A.example),1)]),_:1})]),_:1})):W("",!0)]),_:1}),e(T,null,{default:t(()=>[e(L,{type:"primary",onClick:ue},{default:t(()=>[i(c(d(n)("Send")),1)]),_:1})]),_:1}),e(T,{label:d(n)("Result")},{default:t(()=>[e(M,{type:"textarea",readonly:"",disabled:"",modelValue:A.res,"onUpdate:modelValue":r[10]||(r[10]=_=>A.res=_),rows:"15"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["disabled"])]),_:1},8,["title","modelValue"])]),_:1})]),_:1},8,["label"])]),_:1},8,["modelValue"])])}}},Me=se(he,[["__scopeId","data-v-4edee45a"]]);export{Me as default};
