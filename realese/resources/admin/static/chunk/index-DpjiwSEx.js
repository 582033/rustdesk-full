import{s as a,T as r}from"../entry/index-Czm67r7X.js";import{b as u,c as d}from"./_element-plus-T6dmKOyC.js";import{x as h,r as D}from"./_@vue-DEM3y_BF.js";function _(e){return a({url:"/share_record/list",params:e})}function x(e){return a({url:"/share_record/delete",method:"post",data:e})}function y(e){return a({url:"/share_record/batchDelete",method:"post",data:e})}function v(e){return a({url:"/my/share_record/list",params:e})}function w(e){return a({url:"/my/share_record/delete",method:"post",data:e})}function b(e){return a({url:"/my/share_record/batchDelete",method:"post",data:e})}const m={admin:{batchDelete:y,list:_,remove:x},my:{batchDelete:b,list:v,remove:w}};function E(e="my"){const s=h({list:[],total:0,loading:!1}),n=h({page:1,page_size:10}),o=async()=>{s.loading=!0;const t=await m[e].list(n).catch(i=>!1);s.loading=!1,t&&(s.list=t.data.list,s.total=t.data.total)},p=()=>{n.page===1?o():n.page=1},g=async t=>{if(!await d.confirm(r("Confirm?",{param:r("Delete")}),{confirmButtonText:r("Confirm"),cancelButtonText:r("Cancel"),type:"warning"}).catch(c=>!1))return!1;await m[e].remove({id:t.id}).catch(c=>!1)&&(u.success(r("OperationSuccess")),o())},l=D([]);return{listRes:s,listQuery:n,getList:o,handlerQuery:p,del:g,multipleSelection:l,toBatchDelete:async()=>{if(l.value.length===0)return;const t=l.value.map(c=>c.id);if(!t.length)return u.warning(r("PleaseSelectData")),!1;if(!await d.confirm(r("Confirm?",{param:r("BatchDelete")}),{confirmButtonText:r("Confirm"),cancelButtonText:r("Cancel"),type:"warning"}).catch(c=>!1))return!1;await m[e].batchDelete({ids:t}).catch(c=>!1)&&(u.success(r("OperationSuccess")),o())},expired:t=>{if(t.expire===0)return!1;const i=new Date().getTime(),f=new Date(t.created_at).getTime();return t.expire*1e3+f<i}}}export{E as u};
