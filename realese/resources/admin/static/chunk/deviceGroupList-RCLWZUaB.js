import{l as M,r as $,u as q,c as L}from"./device_group-CfjtSijj.js";import{T as a}from"../entry/index-Czm67r7X.js";import{c as O,b as w}from"./_element-plus-T6dmKOyC.js";import{x as y,l as Q,aa as j,w as x,r as F,an as c,at as G,c as I,o as z,e,Y as t,a0 as _,a1 as f,u as o,Z as P,b as R}from"./_@vue-DEM3y_BF.js";import"./__vendor-BGruaAdM.js";import"./_axios-BtuGy7By.js";import"./_@element-plus-CvluYIrs.js";import"./_@popperjs-DB1lLFnh.js";const te={__name:"deviceGroupList",setup(Y){const p=y({list:[],total:0,loading:!1}),r=y({page:1,page_size:10}),u=async()=>{p.loading=!0;const s=await M(r).catch(l=>!1);p.loading=!1,s&&(p.list=s.data.list,p.total=s.data.total)},C=()=>{r.page===1?u():r.page=1},V=async s=>{if(!await O.confirm(a("Confirm?",{param:a("Delete")}),{confirmButtonText:a("Confirm"),cancelButtonText:a("Cancel"),type:"warning"}).catch(g=>!1))return!1;await $({id:s.id}).catch(g=>!1)&&(w.success(a("OperationSuccess")),u())};Q(u),j(u),x(()=>r.page,u),x(()=>r.page_size,C);const m=F(!1),n=y({id:0,name:"",type:1}),h=s=>{m.value=!0,n.id=s.id,n.name=s.name,n.type=s.type},D=()=>{m.value=!0,n.id=0,n.name="",n.type=1},A=async()=>{await(n.id?q:L)(n).catch(d=>!1)&&(w.success(a("OperationSuccess")),m.value=!1,u())};return(s,l)=>{const d=c("el-button"),g=c("el-form-item"),k=c("el-form"),v=c("el-card"),b=c("el-table-column"),B=c("el-table"),U=c("el-pagination"),E=c("el-input"),S=c("el-dialog"),N=G("loading");return z(),I("div",null,[e(v,{class:"list-query",shadow:"hover"},{default:t(()=>[e(k,{inline:"","label-width":"80px"},{default:t(()=>[e(g,null,{default:t(()=>[e(d,{type:"primary",onClick:C},{default:t(()=>[_(f(o(a)("Filter")),1)]),_:1}),e(d,{type:"danger",onClick:D},{default:t(()=>[_(f(o(a)("Add")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(v,{class:"list-body",shadow:"hover"},{default:t(()=>[P((z(),R(B,{data:p.list,border:""},{default:t(()=>[e(b,{prop:"id",label:"ID",align:"center"}),e(b,{prop:"name",label:o(a)("Name"),align:"center"},null,8,["label"]),e(b,{prop:"created_at",label:o(a)("CreatedAt"),align:"center"},null,8,["label"]),e(b,{prop:"updated_at",label:o(a)("UpdatedAt"),align:"center"},null,8,["label"]),e(b,{label:o(a)("Actions"),align:"center"},{default:t(({row:i})=>[e(d,{onClick:T=>h(i)},{default:t(()=>[_(f(o(a)("Edit")),1)]),_:2},1032,["onClick"]),e(d,{type:"danger",onClick:T=>V(i)},{default:t(()=>[_(f(o(a)("Delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[N,p.loading]])]),_:1}),e(v,{class:"list-page",shadow:"hover"},{default:t(()=>[e(U,{background:"",layout:"prev, pager, next, sizes, jumper","page-sizes":[10,20,50,100],"page-size":r.page_size,"onUpdate:pageSize":l[0]||(l[0]=i=>r.page_size=i),"current-page":r.page,"onUpdate:currentPage":l[1]||(l[1]=i=>r.page=i),total:p.total},null,8,["page-size","current-page","total"])]),_:1}),e(S,{modelValue:m.value,"onUpdate:modelValue":l[4]||(l[4]=i=>m.value=i),title:n.id?o(a)("Update"):o(a)("Create"),width:"800"},{default:t(()=>[e(k,{class:"dialog-form",ref:"form",model:n,"label-width":"120px"},{default:t(()=>[e(g,{label:o(a)("Name"),prop:"name",required:""},{default:t(()=>[e(E,{modelValue:n.name,"onUpdate:modelValue":l[2]||(l[2]=i=>n.name=i)},null,8,["modelValue"])]),_:1},8,["label"]),e(g,null,{default:t(()=>[e(d,{onClick:l[3]||(l[3]=i=>m.value=!1)},{default:t(()=>[_(f(o(a)("Cancel")),1)]),_:1}),e(d,{onClick:A,type:"primary"},{default:t(()=>[_(f(o(a)("Submit")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}};export{te as default};
