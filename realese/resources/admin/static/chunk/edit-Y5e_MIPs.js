import{ab as R,aa as T}from"./__vendor-BGruaAdM.js";import{T as o,n as A,k as B,o as D,_ as G}from"../entry/index-Czm67r7X.js";import{l as L}from"./group-DeA26ZkG.js";import{b as N}from"./_element-plus-T6dmKOyC.js";import{r as V,l as y,x as P,an as c,c as S,o as k,e as t,Y as n,u as e,P as I,ah as F,b as M,a0 as C,a1 as x}from"./_@vue-DEM3y_BF.js";import{D as z,E as O}from"./common_options-DMBdfv_8.js";import"./_axios-BtuGy7By.js";import"./_@element-plus-CvluYIrs.js";import"./_@popperjs-DB1lLFnh.js";function Y(p){let i=V({}),a=V({});const m=V([]),_=async u=>{const d=await A(u);i.value={...d.data},a.value={...d.data}};return p>0&&y(u=>{_(p)}),y(async()=>{const u=await L({page_size:9999}).catch(d=>!1);u&&(m.value=u.data.list)}),{form:a,item:i,getDetail:_,groupsList:m}}function j(p,i){const a=V(null),m=R(),_=P({username:[{required:!0,message:o("ParamRequired",{param:o("Username")})}],group_id:[{required:!0,message:o("ParamRequired",{param:o("Group")})}],status:[{required:!0,message:o("ParamRequired",{param:o("Status")})}]}),f=async()=>await a.value.validate().catch(v=>!1),u=async()=>(await D(p.value).catch(v=>!1)).code===0,d=async()=>(await B(p.value).catch(v=>!1)).code===0,g=i>0?d:u;return{root:a,rules:_,validate:f,submit:async()=>{if(!await f())return;await g()&&(N.success(o("OperationSuccess")),m.back())},cancel:()=>{m.back()}}}const H={class:"form-card"},J={__name:"edit",setup(p){const i=T(),{form:a,groupsList:m}=Y(i.params.id),{root:_,rules:f,submit:u,cancel:d}=j(a,i.params.id);return(g,s)=>{const b=c("el-input"),r=c("el-form-item"),v=c("el-option"),E=c("el-select"),U=c("el-switch"),w=c("el-button"),q=c("el-form");return k(),S("div",H,[t(q,{ref_key:"root",ref:_,"label-width":"120px",model:e(a),rules:e(f)},{default:n(()=>[t(r,{label:e(o)("Username"),prop:"username"},{default:n(()=>[t(b,{modelValue:e(a).username,"onUpdate:modelValue":s[0]||(s[0]=l=>e(a).username=l)},null,8,["modelValue"])]),_:1},8,["label"]),t(r,{label:e(o)("Email"),prop:"email"},{default:n(()=>[t(b,{modelValue:e(a).email,"onUpdate:modelValue":s[1]||(s[1]=l=>e(a).email=l)},null,8,["modelValue"])]),_:1},8,["label"]),t(r,{label:e(o)("Nickname"),prop:"nickname"},{default:n(()=>[t(b,{modelValue:e(a).nickname,"onUpdate:modelValue":s[2]||(s[2]=l=>e(a).nickname=l)},null,8,["modelValue"])]),_:1},8,["label"]),t(r,{label:e(o)("Group"),prop:"group_id"},{default:n(()=>[t(E,{modelValue:e(a).group_id,"onUpdate:modelValue":s[3]||(s[3]=l=>e(a).group_id=l)},{default:n(()=>[(k(!0),S(I,null,F(e(m),l=>(k(),M(v,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),t(r,{label:e(o)("IsAdmin"),prop:"is_admin"},{default:n(()=>[t(U,{modelValue:e(a).is_admin,"onUpdate:modelValue":s[4]||(s[4]=l=>e(a).is_admin=l),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1},8,["label"]),t(r,{label:e(o)("Status"),prop:"status"},{default:n(()=>[t(U,{modelValue:e(a).status,"onUpdate:modelValue":s[5]||(s[5]=l=>e(a).status=l),"active-value":e(O),"inactive-value":e(z)},null,8,["modelValue","active-value","inactive-value"])]),_:1},8,["label"]),t(r,{label:e(o)("Remark"),prop:"remark"},{default:n(()=>[t(b,{modelValue:e(a).remark,"onUpdate:modelValue":s[6]||(s[6]=l=>e(a).remark=l)},null,8,["modelValue"])]),_:1},8,["label"]),t(r,null,{default:n(()=>[t(w,{onClick:e(d)},{default:n(()=>[C(x(e(o)("Cancel")),1)]),_:1},8,["onClick"]),t(w,{onClick:e(u),type:"primary"},{default:n(()=>[C(x(e(o)("Submit")),1)]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules"])])}}},te=G(J,[["__scopeId","data-v-ffdf02f5"]]);export{te as default};
