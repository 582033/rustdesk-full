import{u as K}from"./index-B1Bs_yz0.js";import{_ as W,T as t}from"../entry/index-Czm67r7X.js";import{l as X}from"./global-Czwz-x68.js";import{l as N,aa as ee,w as D,an as d,at as le,c as _,o as r,e as o,Y as a,u as e,P as y,ah as V,b as v,a0 as m,a1 as u,Z as oe,_ as ae,a as f,U as q,A as te}from"./_@vue-DEM3y_BF.js";import"./__vendor-BGruaAdM.js";import"./collection-CALyNR1w.js";import"./_element-plus-T6dmKOyC.js";import"./_@element-plus-CvluYIrs.js";import"./_@popperjs-DB1lLFnh.js";import"./_axios-BtuGy7By.js";const ne={key:0},de={key:0},re={key:1},se={class:"colors"},ie={style:{"background-color":"var(--tag-bg-color)"},class:"colorbox"},ue={class:"colors"},ce={style:{"background-color":"var(--tag-bg-color)"},class:"colorbox"},pe={__name:"index",setup(_e){const{allUsers:U,getAllUsers:R}=X();N(R);const{listRes:A,listQuery:s,getList:h,handlerQuery:B,del:F,formVisible:k,formData:i,toEdit:L,toAdd:M,submit:S,activeChange:E,currentColor:O,collectionListRes:$,changeUser:I,collectionListResForUpdate:P,changeUserForUpdate:Q}=K("admin");return N(h),ee(h),D(()=>s.page,h),D(()=>s.page_size,B),(me,n)=>{const b=d("el-option"),C=d("el-select"),c=d("el-form-item"),g=d("el-button"),z=d("el-form"),w=d("el-card"),p=d("el-table-column"),T=d("el-tag"),j=d("el-table"),Y=d("el-pagination"),Z=d("el-input"),G=d("el-color-picker"),H=d("el-dialog"),J=le("loading");return r(),_("div",null,[o(w,{class:"list-query",shadow:"hover"},{default:a(()=>[o(z,{inline:"","label-width":"120px"},{default:a(()=>[o(c,{label:e(t)("Owner")},{default:a(()=>[o(C,{modelValue:e(s).user_id,"onUpdate:modelValue":n[0]||(n[0]=l=>e(s).user_id=l),clearable:"",onChange:e(I)},{default:a(()=>[(r(!0),_(y,null,V(e(U),l=>(r(),v(b,{key:l.id,label:l.username,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),_:1},8,["label"]),o(c,{label:e(t)("AddressBookName")},{default:a(()=>[o(C,{modelValue:e(s).collection_id,"onUpdate:modelValue":n[1]||(n[1]=l=>e(s).collection_id=l),clearable:""},{default:a(()=>[o(b,{value:0,label:e(t)("MyAddressBook")},null,8,["label"]),(r(!0),_(y,null,V(e($).list,l=>(r(),v(b,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),o(c,null,{default:a(()=>[o(g,{type:"primary",onClick:e(B)},{default:a(()=>[m(u(e(t)("Filter")),1)]),_:1},8,["onClick"]),o(g,{type:"danger",onClick:e(M)},{default:a(()=>[m(u(e(t)("Add")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),o(w,{class:"list-body",shadow:"hover"},{default:a(()=>[oe((r(),v(j,{data:e(A).list,border:""},{default:a(()=>[o(p,{prop:"id",label:"ID",align:"center"}),o(p,{label:e(t)("Owner"),align:"center"},{default:a(({row:l})=>[l.user_id?(r(),_("span",ne,[o(T,null,{default:a(()=>[m(u(e(U)?.find(x=>x.id===l.user_id)?.username),1)]),_:2},1024)])):ae("",!0)]),_:1},8,["label"]),o(p,{prop:"collection_id",label:e(t)("AddressBookName"),align:"center",width:"150"},{default:a(({row:l})=>[l.collection_id===0?(r(),_("span",de,u(e(t)("MyAddressBook")),1)):(r(),_("span",re,u(l.collection?.name),1))]),_:1},8,["label"]),o(p,{prop:"name",label:e(t)("Name"),align:"center"},null,8,["label"]),o(p,{prop:"color",label:e(t)("Color"),align:"center"},{default:a(({row:l})=>[f("div",se,[f("div",ie,[f("div",{style:q({backgroundColor:l.color}),class:"dot"},null,4)])])]),_:1},8,["label"]),o(p,{prop:"created_at",label:e(t)("CreatedAt"),align:"center"},null,8,["label"]),o(p,{prop:"updated_at",label:e(t)("UpdatedAt"),align:"center"},null,8,["label"]),o(p,{label:e(t)("Actions"),align:"center",width:"250"},{default:a(({row:l})=>[o(g,{onClick:x=>e(L)(l)},{default:a(()=>[m(u(e(t)("Edit")),1)]),_:2},1032,["onClick"]),o(g,{type:"danger",onClick:x=>e(F)(l)},{default:a(()=>[m(u(e(t)("Delete")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])),[[J,e(A).loading]])]),_:1}),o(w,{class:"list-page",shadow:"hover"},{default:a(()=>[o(Y,{background:"",layout:"prev, pager, next, sizes, jumper","page-sizes":[10,20,50,100],"page-size":e(s).page_size,"onUpdate:pageSize":n[2]||(n[2]=l=>e(s).page_size=l),"current-page":e(s).page,"onUpdate:currentPage":n[3]||(n[3]=l=>e(s).page=l),total:e(A).total},null,8,["page-size","current-page","total"])]),_:1}),o(H,{modelValue:e(k),"onUpdate:modelValue":n[9]||(n[9]=l=>te(k)?k.value=l:null),title:e(i).id?e(t)("Update"):e(t)("Create"),width:"800"},{default:a(()=>[o(z,{class:"dialog-form",ref:"form",model:e(i),"label-width":"120px"},{default:a(()=>[o(c,{label:e(t)("Owner"),prop:"user_id",required:""},{default:a(()=>[o(C,{modelValue:e(i).user_id,"onUpdate:modelValue":n[4]||(n[4]=l=>e(i).user_id=l),onChange:e(Q)},{default:a(()=>[(r(!0),_(y,null,V(e(U),l=>(r(),v(b,{key:l.id,label:l.username,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),_:1},8,["label"]),o(c,{label:e(t)("AddressBookName"),prop:"collection_id",required:""},{default:a(()=>[o(C,{modelValue:e(i).collection_id,"onUpdate:modelValue":n[5]||(n[5]=l=>e(i).collection_id=l),clearable:""},{default:a(()=>[o(b,{value:0,label:e(t)("MyAddressBook")},null,8,["label"]),(r(!0),_(y,null,V(e(P).list,l=>(r(),v(b,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),o(c,{label:e(t)("Name"),prop:"name",required:""},{default:a(()=>[o(Z,{modelValue:e(i).name,"onUpdate:modelValue":n[6]||(n[6]=l=>e(i).name=l)},null,8,["modelValue"])]),_:1},8,["label"]),o(c,{label:e(t)("Color"),prop:"color",required:""},{default:a(()=>[o(G,{modelValue:e(i).color,"onUpdate:modelValue":n[7]||(n[7]=l=>e(i).color=l),"show-alpha":"",onActiveChange:e(E)},null,8,["modelValue","onActiveChange"]),f("div",ue,[f("div",ce,[f("div",{style:q({backgroundColor:e(O)}),class:"dot"},null,4)])])]),_:1},8,["label"]),o(c,null,{default:a(()=>[o(g,{onClick:n[8]||(n[8]=l=>k.value=!1)},{default:a(()=>[m(u(e(t)("Cancel")),1)]),_:1}),o(g,{onClick:e(S),type:"primary"},{default:a(()=>[m(u(e(t)("Submit")),1)]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},he=W(pe,[["__scopeId","data-v-90edf1bb"]]);export{he as default};
